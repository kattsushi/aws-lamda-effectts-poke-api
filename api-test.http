###
# Pokemon API - REST Client Tests
# Use with VSCode REST Client extension
# Make sure serverless offline is running: pnpm run dev:serverless
###

@baseUrl = http://localhost:4000/dev
@localUrl = http://localhost:4000

### Health Check (if available)
GET {{localUrl}}/health

###
# ğŸ¯ MAIN ENDPOINT - GET ALL POKEMON (REQUIRED FORMAT)
# This is the main requirement: returns ALL 1302 Pokemon in format [{"name": "...", "types": [...]}]
# âš ï¸  May take 20+ seconds on first request
GET {{baseUrl}}/pokemon

###
# ğŸ” INDIVIDUAL POKEMON - Get specific Pokemon by name
GET {{baseUrl}}/pokemon/charizard

###
# ğŸ” INDIVIDUAL POKEMON - Get Pikachu
GET {{baseUrl}}/pokemon/pikachu

###
# ğŸ” INDIVIDUAL POKEMON - Get Bulbasaur
GET {{baseUrl}}/pokemon/bulbasaur

###
# ğŸ” INDIVIDUAL POKEMON - Get Mew
GET {{baseUrl}}/pokemon/mew

###
# ğŸ” INDIVIDUAL POKEMON - Test with ID instead of name
GET {{baseUrl}}/pokemon/25


###
# âŒ ERROR TESTING - Invalid Pokemon name
GET {{baseUrl}}/pokemon/invalidpokemon

###
# ğŸš€ LAMBDA DIRECT INVOCATION - getPokemon function
POST {{localUrl}}/2015-03-31/functions/getPokemon/invocations
Content-Type: application/json

{
  "pathParameters": {
    "name": "charizard"
  },
  "httpMethod": "GET",
  "path": "/pokemon/charizard"
}

###
# ğŸš€ LAMBDA DIRECT INVOCATION - listPokemons function
POST {{localUrl}}/2015-03-31/functions/listPokemons/invocations
Content-Type: application/json

{
  "queryStringParameters": {
    "limit": "5",
    "offset": "0"
  },
  "httpMethod": "GET",
  "path": "/pokemon"
}

###
# ğŸš€ LAMBDA DIRECT INVOCATION - getAllPokemons function (MAIN REQUIREMENT)
# âš ï¸  This may take 20+ seconds
POST {{localUrl}}/2015-03-31/functions/getAllPokemons/invocations
Content-Type: application/json

{
  "httpMethod": "GET",
  "path": "/pokemons"
}

###
# ğŸ§ª PERFORMANCE TEST - Time the main endpoint
# @name getAllPokemon
GET {{baseUrl}}/pokemons

###
# ğŸ“Š RESPONSE VALIDATION - Check first few Pokemon from main endpoint
GET {{baseUrl}}/pokemons

###
# ğŸ”„ CONCURRENT TEST - Multiple requests (run these simultaneously)
GET {{baseUrl}}/pokemon/charizard

###
GET {{baseUrl}}/pokemon/pikachu

###
GET {{baseUrl}}/pokemon/bulbasaur

###
# ğŸ“ˆ LOAD TEST - Paginated requests
GET {{baseUrl}}/pokemon?limit=20&offset=0

###
GET {{baseUrl}}/pokemon?limit=20&offset=20

###
GET {{baseUrl}}/pokemon?limit=20&offset=40

###
# ğŸ¯ FINAL VALIDATION - Main requirement endpoint
# This should return exactly: [{"name": "bulbasaur", "types": ["grass", "poison"]}, ...]
GET {{baseUrl}}/pokemons

###
# ğŸ“ NOTES:
# 1. Make sure to run `pnpm run dev:serverless` before testing
# 2. The /pokemons endpoint may take 20+ seconds on first request
# 3. All endpoints use proper Effect-TS error handling
# 4. Individual Pokemon endpoint supports both name and ID
# 5. Paginated endpoint supports limit and offset parameters
# 6. Lambda direct invocation endpoints are for advanced testing
###
